[env:esp32_wifi]
platform = espressif32
board = esp32dev
framework = arduino

; ESP32 #7 - WiFi configuration node
; Provides web interface, REST API, WebSocket, and SD card session storage
; Also handles scanning for one encoder/button section

monitor_speed = 115200
upload_speed = 921600

build_flags =
    -D ESP32_WIFI
    -D CORE_DEBUG_LEVEL=3
    -std=gnu++17

lib_deps =
    Wire
    SPI
    SD
    WiFi
    WebServer
    ArduinoJson@^6.21.0
    ESPAsyncWebServer

lib_extra_dirs =
    ../libraries

lib_ldf_mode = deep+

; ESP32 configuration
board_build.partitions = default.csv
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_build.flash_mode = qio

; File system for web interface
board_build.filesystem = littlefs

; Optimize for performance
build_unflags = -Os
build_flags = -O2
