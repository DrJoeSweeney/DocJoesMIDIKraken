[env:teensy40]
platform = teensy
board = teensy40
framework = arduino

; Teensy 4.0 - Main MIDI controller
; Receives events from 7 ESP32s via 3 I2C buses
; Generates and sends USB MIDI messages
; Manages state, snapshots, sessions

monitor_speed = 115200
upload_speed = 2000000

build_flags =
    -D TEENSY40
    -D USB_MIDI
    -D ARDUINO_TEENSY40
    -std=gnu++17

lib_deps =
    Wire
    SPI
    SD

lib_extra_dirs =
    ../libraries

lib_ldf_mode = deep+

; Teensy 4.0 @ 600MHz
board_build.f_cpu = 600000000L

; USB MIDI configuration
board_build.usb = midi

; Optimize for speed
build_unflags = -Os
build_flags = -O2 -ffast-math

; Additional Teensy-specific options
board_build.optimize = o2std
