[env:esp32_peripheral]
platform = espressif32
board = esp32dev
framework = arduino

; ESP32 peripheral nodes (ESP32 #1-6)
; Responsible for scanning encoders and buttons via shift registers
; Communicates with Teensy via I2C slave

monitor_speed = 115200
upload_speed = 921600

build_flags =
    -D ESP32_PERIPHERAL
    -D CORE_DEBUG_LEVEL=3
    -std=gnu++17

lib_deps =
    Wire

lib_extra_dirs =
    ../libraries

; Custom library paths
lib_ldf_mode = deep+

; ESP32 dual-core configuration
board_build.partitions = default.csv
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_build.flash_mode = qio

; Optimize for performance
build_unflags = -Os
build_flags = -O2
